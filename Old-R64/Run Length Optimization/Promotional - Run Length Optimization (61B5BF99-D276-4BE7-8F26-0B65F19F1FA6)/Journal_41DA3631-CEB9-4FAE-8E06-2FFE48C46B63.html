<h2><strong>Use Case Challenge: Run Length Optimization</strong></h2><p><strong>Joe Reckamp&#39;s Solution:</strong></p><p><a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;426FBCBC-345D-4248-BA1D-89668AFF21FE" rel="nofollow noopener noreferrer">Starting Point</a></p><p>Related to this use case, there are two main questions that can be asked:</p><p>1. What is the maximum rate that product can be produced over the long-term? In this case, you are maximizing total production over multiple downtime periods.</p><p>2. What is the fastest X amount of product can be produced? In this case, you are maximizing for a particular order.</p><p>The ideal solution for either option is to use the raw data or a combination of raw data sets to avoid force fitting a specific model to the degradation rate.</p><h4><strong>Solution for #1: Maximum Long-Term Production Rate</strong></h4><p>To maximize production over the long-term, you can assume that every production time period also has an associated downtime.</p><p>Step 1: Create a capsule for the entire data set available. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;48BD6C19-9D50-4B55-B89E-5735D25C8E1D" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>$data.tocapsules().merge(1s)</code></pre><p style="margin-left: 20px;">Note: If multiple historical production rate data sets are available, it is recommended to use all of them with an average reference profile as the input.</p><p>Step 2: Calculate the total run time. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;19A27D5C-FFCB-4328-9C18-7AFF5F69DFA8" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>timesince($run.removelongerthan(40d),1h)</code></pre><p>Step 3: Calculate the total product produced. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;C76B62E3-25B1-4A27-9C3C-2C4C47D94824" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>$rate.integral($run.removelongerthan(40d))</code></pre><p>Step 4: Calculate the average production rate including the downtime (in this scenario, 12 hours). This calculates the average production rate across both the run and downtime periods. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;CA6E0096-0095-4065-8012-827B9F3DFC23" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>$Downtime &#61; 12h
$TotalProduced/($Time&#43;$Downtime)</code></pre><p>Step 5: Using Signal from Condition, find the Max Value (maximum average production rate) and place it at the Max Key. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;EF35AB93-BCA0-4E76-AB7D-FBC62D158B18" rel="nofollow noopener noreferrer">(Step)</a></p><p style="margin-left: 20px;">(Optional): Steps 1-5 could be combined into a single Formula. <a href="/links?type&#61;signal&amp;item&#61;BAB4EEED-E098-40E3-AC53-CDCC0CC9B071" rel="nofollow noopener noreferrer">(Trend Formula)</a></p><pre style="margin-left: 20px;"><code>// Define the downtime window
$Downtime &#61; 12h

// Create a capsule for the data set provided
$dataset &#61; $ProdRate.tocapsules().merge(1s).removelongerthan(40d)

// Calculate run time
$runtime &#61; timesince($dataset, 1h)

// Calculate total product produced
$TotalProduced &#61; $ProdRate.integral($dataset)

// Calculate adjusted or average production rate including the downtime window
$AdjProdRate &#61; $TotalProduced/($runtime&#43;$Downtime)

// Output the Max Value at the Max Key
$AdjProdRate.aggregate(MaxValue(),$dataset,MaxKey())</code></pre><p>Step 6: Create a capsule at the Max Key from Step 5 and use it with Formula to find the Run Time at the Max Key (desired run time to maximize production) and the Production Rate at the Max Key (production rate at which to take the downtime). <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;4EF8BAF8-92E1-4D17-A1C3-C7DE0939B075" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>$runtime.aggregate(average(),$max.tocapsules(),middleKey()).convertUnits(&#39;min&#39;)</code></pre><pre><code>$ProdRate.aggregate(average(),$max.tocapsules(),middleKey())</code></pre><p style="margin-left: 20px;">Note: If done correctly, the second equation for production rate at max key should equal the result from Step 5 as the downtime should be taken when the actual production rate drops below the adjusted average production rate.</p><p><strong>Result:</strong> The adjusted average production rate is 33.692 klb/h, which means the order (50,000 klb) could be generated in (50,000/33.692) h or 61.8 days, giving an estimated end of production date of March 2, 2020 at 4:01 PM EST. Production downtime should occur approximately every 18,003min of run time (18,723min - 12h downtime) or when the production rate drops below 33.692klb/h (see link for expected production rate over time). <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;28B8CF25-282D-4BEF-99D5-799E7EB54ACB" rel="nofollow noopener noreferrer">(Step)</a></p><p style="margin-left: 20px;">Note: Technically this adjusted rate averages in downtimes so the time given above is slightly later than the actual production time as one less downtime would be required. As shown in the above link, the actual production end date would be <strong>March 2, 2020 at 4:59 AM EST</strong>.</p><h4><strong>Solution for #2: Quickest Time for a Particular Order Size</strong></h4><p>Instead of maximizing for the long-term production rate, a specific order size should be able to be met in a shorter amount of time as you can run slightly longer to complete the order and strategically place the downtime window just after the order is completed. What this means is that instead of a downtime with each run time, there is actually one less downtime window than the number of run times.</p><p>Step 1: Create a capsule for the entire data set available. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;8B14B06F-668A-4A1C-B8A9-1CD3A246BB08" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>$data.tocapsules().merge(1s)</code></pre><p style="margin-left: 20px;">Note: If multiple historical production rate data sets are available, it is recommended to use all of them with an average reference profile as the input.</p><p>Step 2: Calculate the total run time. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;55114D88-A337-4957-9F76-50D039568662" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>timesince($run.removelongerthan(40d),1h)</code></pre><p>Step 3: Calculate the total product produced. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;FBECAB15-606A-4D9C-B041-CF751A999853" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>$rate.integral($run.removelongerthan(40d))</code></pre><p>Step 4: Calculate the number of downtimes that would be required for the order quantity. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;97F1EB3D-9107-4F84-A6E3-191BDD9FB84A" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>// Specify Order Size
$Order &#61; 50000klb

// Calculate downtimes by rounding up the number of cycles that would be needed and then subtract the last downtime
($Order/$TotalProduced.within($data.move(1min,0))).ceiling()-1
// within and move used to avoid the $TotalProduced value of 0, which produces infinite result</code></pre><p>Step 5: Calculate the average production rate only during run time. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;44679FB1-036F-45EA-AAEE-C09348D0D6F9" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>$TotalProduced/$RunTime</code></pre><p>Step 6: Calculate the total time required for the order quantity. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;EEB86005-1ECC-43DB-B24B-5FD9F0A2221D" rel="nofollow noopener noreferrer">(Step)</a></p><pre><code>// Specify the Order Size
$Order &#61; 50000klb

// Specify the Downtime Window
$Downtime &#61; 12h

// Calculate the total time required
($NumofDowntime*$Downtime)&#43;($Order/$AvgRate)</code></pre><p>Step 7: Find the Minimum time required using Signal from Condition. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;971F2969-065D-4E52-870F-D00BE4117D04" rel="nofollow noopener noreferrer">(Step)</a></p><p style="margin-left: 20px;">(Optional): All of the steps above could be combined into a single Formula. <a href="/links?type&#61;signal&amp;item&#61;7E02D0D1-3EC7-4044-991A-4567E61B5251" rel="nofollow noopener noreferrer">(Trend Formula)</a></p><pre style="margin-left: 20px;"><code>// Define the downtime window and order size
$Downtime &#61; 12h
$Order &#61; 50000klb

// Create a capsule for the data set provided
$dataset &#61; $ProdRate.tocapsules().merge(1s).removelongerthan(40d)

// Calculate run time
$runtime &#61; timesince($dataset, 1h)

// Calculate total product produced
$TotalProduced &#61; $ProdRate.integral($dataset)

// Calculate average product produced during run time
$AvgProdRate &#61; $TotalProduced/$runtime

// Calculate the number of downtimes required
$NumofDowntime &#61; ($Order/$TotalProduced.within($dataset.move(1min,0))).ceiling()-1

// Calculate the total time required for the order
$TotalTimeRequired &#61; ($NumofDowntime*$Downtime)&#43;($Order/$AvgProdRate)

// Find the minimum time required for the order
$TotalTimeRequired.aggregate(minValue(),$dataset,minKey())</code></pre><p><strong>Result: </strong>The fastest production time for a 50,000klb order based on the given data is 1472.4 hours or 61.35 days, giving an end of production date of <strong>March 2, 2020 at 4:25 AM EST</strong>. Based on 4 downtimes and 5 run times to produce the desired amount, downtimes should be taken every 284.88h of run time [(1472.4h total time - 48h of downtime) / 5 run times] or when the product produced during each run time hits 10,000klb. <a href="/links?type&#61;workstep&amp;workbook&#61;61B5BF99-D276-4BE7-8F26-0B65F19F1FA6&amp;worksheet&#61;41DA3631-CEB9-4FAE-8E06-2FFE48C46B63&amp;workstep&#61;E8EA09E3-B4F9-4B52-A2E1-E635B94D91D7" rel="nofollow noopener noreferrer">(Step)</a></p>